<md-list>
    <md-subheader class="md-no-sticky"><md-button ng-if="!ngDisabled" class="md-raised" ng-click="add($event)">Add {{title}}</md-button> {{ngModel.length}} notes</md-subheader>
    <md-list-item class="md-3-line" ng-repeat="note in ngModel">
        <md-icon class="md-avatar material-icons">insert_comment</md-icon>

        <div class="md-list-item-text" layout="column" ng-if="!note.edit">
            <h3 style="white-space: normal;">{{ note.title }}</h3>
            <h4 style="white-space: normal;">{{ note.desc }}</h4>
            <p>{{ getUsername(note.owner) }} | {{note.createdAt | date: 'medium'}}</p>
            <div ng-repeat="file in note.files" class="md-block" layout="column">
                <files-display ng-model="file"></files-display>
            </div>
        </div>
        <div class="md-list-item-text" layout="column" ng-if="note.edit">
            <form name="noteForm">
                <md-input-container class="md-block" flex-gt-sm>
                    <label>Title</label>
                    <input name="title" md-maxlength="30" required ng-model="note.title">
                    <div ng-messages="noteForm.title.$error">
                        <div ng-message="required">This is required.</div>
                        <div ng-message="md-maxlength">The name has to be less than 30 characters long.</div>
                    </div>
                </md-input-container>
                <md-input-container class="md-block">
                    <label>Description</label>
                    <textarea name="desc" ng-model="note.desc" md-maxlength="150" rows="5" md-select-on-focus></textarea>
                    <div ng-messages="noteForm.desc.$error">
                        <div ng-message="md-maxlength">The name has to be less than 150 characters long.</div>
                    </div>
                </md-input-container>
                <!--<file-upload name="files" ng-model="note.files" multiple="true" allow="" controls="fileUploadControls"></file-upload>-->
            </form>
        </div>
        <div layout="column" ng-show="isCurrentOwner(note.owner) && !ngDisabled">
            <a href ng-click="remove($event, note)">
                <md-icon class="md-avatar material-icons">clear</md-icon>
            </a>
            <a href ng-show="!note.edit" ng-click="note.edit = true">
                <md-icon class="md-avatar material-icons">edit</md-icon>
            </a>
            <a href ng-show="note.edit" ng-click="note.edit = false" ng-disabled="noteForm.$invalid">
                <md-icon class="md-avatar material-icons">check</md-icon>
            </a>
        </div>
    </md-list-item>
</md-list>